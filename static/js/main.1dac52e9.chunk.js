(this["webpackJsonpmy-test"]=this["webpackJsonpmy-test"]||[]).push([[0],{100:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return m}));var r=n(9),a=n.n(r),c=n(18),i=n(40),o=n(5),s=n(14),u="ADD-POST",l="SET-USER-PROFILE",d="SET-USER-STATUS",f="DELETE-POST",j=function(e){return{type:d,status:e}},b=function(e){return{type:l,data:e}},p=function(e){return{type:u,post:e}},g={profile:null,status:"",postsAll:[{id:0,msg:"Information one",likesCount:"15"},{id:1,msg:"Information two",likesCount:"5"}],newText:"New text! Woof!"},h=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.c.getAuth(e);case 2:r=t.sent,n(b(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.getStatus(e);case 2:r=t.sent,n(j(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(j(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{profile:t.data});case u:var n={id:5,msg:t.post,likesCount:5};return Object(o.a)(Object(o.a)({},e),{},{postsAll:[].concat(Object(i.a)(e.postsAll),[n]),newText:""});case d:return Object(o.a)(Object(o.a)({},e),{},{status:t.status});case f:return Object(o.a)(Object(o.a)({},e),{},{postsAll:e.postsAll.filter((function(e){return e.id!=t.postId}))});default:return e}}},101:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s}));var r=n(40),a=n(5),c=(n(14),n(25),"SEND-MESSAGE"),i=function(e){return{type:c,newMessageBody:e}},o={dialogsMsg:[{id:0,msg:"One message"},{id:1,msg:"Two message"},{id:2,msg:"Three message"}],dialogsData:[{id:1,name:"User one"},{id:2,name:"User two"}]},s=function(e,t){return function(e){e(i(t))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n=t.newMessageBody;return Object(a.a)(Object(a.a)({},e),{},{dialogsMsg:[].concat(Object(r.a)(e.dialogsMsg),[{id:5,msg:n}])});default:return e}}},14:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(78),a=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0",headers:{"API-KEY":"c52f5d7d-be93-4145-b9b1-a9f12fd81502"}}),c={getUsers:function(e,t){return a.get("/users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},getUnfollow:function(e){return a.delete("/follow/".concat(e.id)).then((function(e){return e.data}))},getFollow:function(e){return a.post("/follow/".concat(e.id),{}).then((function(e){return e.data}))},getAuth:function(e){return i.getAuth(e)},getHeader:function(){return a.get("/auth/me")}},i={getAuth:function(e){return a.get("/profile/"+e).then((function(e){return e.data}))},getStatus:function(e){return a.get("profile/status/"+e).then((function(e){return e.data}))},updateStatus:function(e){return a.put("profile/status/",{status:e})}},o={login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("/auth/login",{email:e,password:t,rememberMe:n})},logout:function(){return a.delete("/auth/login",{})}}},15:function(e,t,n){e.exports={nav:"nav_nav__25REj",item:"nav_item__4Ebpg",active:"nav_active__3J6By"}},168:function(e,t,n){},248:function(e,t,n){},25:function(e,t,n){"use strict";n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return P})),n.d(t,"f",(function(){return y}));var r=n(9),a=n.n(r),c=n(18),i=n(40),o=n(5),s=n(14),u=(n(0),function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(o.a)(Object(o.a)({},e),r):e}))}),l="FOLLOW",d="UNFOLLOW",f="SET-USERS",j="SET-CURRENT-PAGE",b="SET-TOTAL-COUNT",p="TOGGLE-IS-FETCHING",g="TOGGLE-IS-FOLLOWING",h=function(e,t){return{following:e,userId:t,type:g}},O=function(e){return{isFetching:e,type:p}},m=function(e){return{page:e,type:j}},v=function(e){return{userId:e,type:l}},x=function(e){return{userId:e,type:d}},w={users:[],pageSize:10,totalCount:0,currentPage:1,isFetching:!0,followingIsProgress:[]},_=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(O(!0)),r(m(e)),n.next=4,s.c.getUsers(e,t);case 4:c=n.sent,r(O(!1)),r({users:c.items,type:f}),r({count:c.totalCount,type:b});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},C=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(h(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(c(n.id)),t(h(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),P=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C(n,e,s.c.getFollow.bind(s.c),v);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C(n,e,s.c.getUnfollow.bind(s.c),x);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(o.a)(Object(o.a)({},e),{},{totalCount:t.count});case j:return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.page});case l:return Object(o.a)(Object(o.a)({},e),{},{users:u(e.users,t.userId,"id",{followed:!0})});case d:return Object(o.a)(Object(o.a)({},e),{},{users:u(e.users,t.userId,"id",{followed:!1})});case f:return Object(o.a)(Object(o.a)({},e),{},{users:t.users});case p:return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching});case g:return Object(o.a)(Object(o.a)({},e),{},{followingIsProgress:t.following?[].concat(Object(i.a)(e.followingIsProgress),[t.userId]):e.followingIsProgress.filter((function(e){return e!=t.userId}))});default:return e}}},26:function(e,t,n){e.exports={"form-control":"FormsControl_form-control__wMzIS",formControl:"FormsControl_formControl__17zhj",error:"FormsControl_error__1KuYU",formError:"FormsControl_formError__136jR"}},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},297:function(e,t,n){"use strict";n.r(t);var r=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,304)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},a=n(0),c=n.n(a),i=n(67),o=n.n(i),s=(n(168),n(35)),u=n(36),l=n(38),d=n(37),f=n(8),j=n(100),b=n(101),p={},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return e},h=n(25),O=n(9),m=n.n(O),v=n(18),x=n(5),w=n(14),_=n(46),C="auth/SET-USER-DATA",P=function(e,t,n,r){return{type:C,data:{userId:e,email:t,login:n,isAuth:r}}},y={userId:null,email:null,login:null,isAuth:!1},S=function(){return function(){var e=Object(v.a)(m.a.mark((function e(t){var n,r,a,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.c.getHeader();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,a=r.id,c=r.email,i=r.login,t(P(a,c,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(e,t,n){return function(){var r=Object(v.a)(m.a.mark((function r(a){var c,i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,w.a.login(e,t,n);case 2:0===(c=r.sent).data.resultCode?a(S()):(i=c.data.messages.length>0?c.data.messages[0]:"Error",a(Object(_.a)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(x.a)(Object(x.a)({},e),t.data);default:return e}},N="SET-INITIALIZED",I={initialized:!1},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(x.a)(Object(x.a)({},e),{},{initialized:!0});default:return e}},T=n(135),A=n(133),U=Object(f.c)({ProfilePage:j.b,MessagePage:b.b,sidebar:g,userPage:h.a,authPage:E,appPage:k,form:A.a}),L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,z=Object(f.e)(U,L(Object(f.a)(T.a)));window.__store__=z;var M=z,D=(n(248),n(10)),R=n(72),G=n.n(R),B=n(12),q=n(1),W=function(e){return Object(q.jsxs)("header",{className:G.a.header,children:[Object(q.jsx)("img",{src:"https://pbs.twimg.com/profile_images/1063925348205821958/DlGcxdOl_400x400.jpg",alt:""}),Object(q.jsx)("div",{className:G.a.loginBlock,children:e.isAuth?Object(q.jsxs)("div",{children:[e.login," ",Object(q.jsx)("button",{onClick:e.logout,children:"Log out"})]}):Object(q.jsx)(B.b,{to:"/login",children:"Login"})})]})},J=(n(78),n(17)),K=n(131),V=n(50),H=n(91),X=n(26),Y=n.n(X),Q=Object(V.a)("input"),Z=Object(K.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return Object(q.jsxs)("form",{onSubmit:t,children:[Object(V.b)("Email",[H.c],Q,"email"),Object(V.b)("Password",[H.c],Q,"password",{type:"password"}),Object(V.b)(null,[],Q,"rememberMe",{type:"checkbox"},"remember me"),n&&Object(q.jsx)("div",{className:Y.a.formError,children:n}),Object(q.jsx)("div",{children:Object(q.jsx)("button",{type:"submit",children:"Login"})})]})})),$=Object(f.d)(Object(J.b)((function(e){return{isAuth:e.authPage.isAuth}}),{loginUser:F}))((function(e){var t=e.isAuth,n=e.loginUser;return t?Object(q.jsx)(D.a,{to:"/profile"}):Object(q.jsxs)("div",{children:[Object(q.jsx)("h1",{children:"LOGIN"}),Object(q.jsx)(Z,{onSubmit:function(e){n(e.email,e.password,e.rememberMe)}})]})})),ee=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(q.jsx)(W,Object(x.a)({},this.props))}}]),n}(c.a.Component),te=Object(D.f)(ee),ne=Object(J.b)((function(e){return{isAuth:e.authPage.isAuth,login:e.authPage.login}}),{headerLogin:S,loginUser:F,logout:function(){return function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.logout();case 2:0===e.sent.data.resultCode&&t(P(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(te),re=n(15),ae=n.n(re),ce=function(){return Object(q.jsxs)("nav",{className:ae.a.nav,children:[Object(q.jsx)("div",{className:ae.a.item,children:Object(q.jsx)(B.b,{to:"/profile",activeClassName:ae.a.active,children:"Profile"})}),Object(q.jsx)("div",{className:ae.a.item,children:Object(q.jsx)(B.b,{to:"/user",activeClassName:ae.a.active,children:"User"})}),Object(q.jsx)("div",{className:ae.a.item,children:Object(q.jsx)(B.b,{to:"/dialog_main",activeClassName:ae.a.active,children:"Messages"})}),Object(q.jsx)("div",{className:ae.a.item,children:Object(q.jsx)(B.b,{to:"/news",activeClassName:ae.a.active,children:"News"})}),Object(q.jsx)("div",{className:ae.a.item,children:Object(q.jsx)(B.b,{to:"/music",activeClassName:ae.a.active,children:"Music"})}),Object(q.jsx)("div",{className:ae.a.item,children:Object(q.jsx)(B.b,{to:"/settings",activeClassName:ae.a.active,children:"Settings"})})]})},ie=(n(294),function(){return Object(q.jsx)("div",{children:"Music page"})}),oe=(n(295),function(){return Object(q.jsx)("div",{children:"News page"})}),se=(n(296),function(){return Object(q.jsx)("div",{children:"Settings page"})}),ue=n(45),le=n(94),de=n.n(le),fe=n.p+"static/media/3573970.d9ead1cf.jpg",je=n(68),be=n(132),pe=n(75),ge=n.n(pe),he=n(137),Oe=n.n(he),me=function(e){for(var t=e.totalCount,n=e.pageSize,r=e.currentPage,c=e.onPageChanged,i=e.portionSize,o=void 0===i?10:i,s=Math.ceil(t/n),u=[],l=1;l<=s;l++)u.push(l);var d=Math.ceil(s/o),f=Object(a.useState)(1),j=Object(be.a)(f,2),b=j[0],p=j[1],g=(b-1)*o+1,h=b*o;return Object(q.jsxs)("div",{className:ge.a.paginator,children:[b>1&&Object(q.jsx)("button",{on:!0,onClick:function(){p(b-1)},children:"PREV"}),u.filter((function(e){return e>=g&&e<=h})).map((function(e){return Object(q.jsx)("span",{className:Oe()(Object(je.a)({},ge.a.selectedPage,r===e),ge.a.pageNumber),onClick:function(t){c(e)},children:e},e)})),d>b&&Object(q.jsx)("button",{on:!0,onClick:function(){p(b+1)},children:"NEXT"})]})},ve=function(e){var t=e.user,n=e.isFollowing,r=e.unfollowF,a=e.followF;return Object(q.jsxs)("div",{children:[Object(q.jsxs)("span",{children:[Object(q.jsx)("div",{children:Object(q.jsx)(B.b,{to:"profile/"+t.id,children:Object(q.jsx)("img",{width:"100px",height:"100px",src:null!=t.photos.small?t.photos.small:fe,className:de.a.ava})})}),Object(q.jsx)("div",{children:t.followed?Object(q.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t)},children:"UNFOLLOW"}):Object(q.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){a(t)},children:"FOLLOW"})})]}),Object(q.jsxs)("span",{children:[Object(q.jsx)("div",{children:t.name}),Object(q.jsx)("div",{children:t.status})]}),Object(q.jsxs)("span",{children:[Object(q.jsx)("div",{children:"u.location.country"}),Object(q.jsx)("div",{children:"u.location.city"})]})]})},xe=["currentPage","onPageChanged","totalCount","pageSize","users"],we=function(e){var t=e.currentPage,n=e.onPageChanged,r=e.totalCount,a=e.pageSize,c=e.users,i=Object(ue.a)(e,xe);return Object(q.jsxs)("div",{children:[Object(q.jsx)(me,{currentPage:t,onPageChanged:n,totalCount:r,pageSize:a}),Object(q.jsx)("div",{children:c.map((function(e){return Object(q.jsx)(ve,{user:e,isFollowing:i.isFollowing,unfollowF:i.unfollowF,followF:i.followF},e.id)}))})]})},_e=n(41),Ce=n(138),Pe=Object(Ce.a)((function(e){return e.userPage.users}),(function(e){return e.filter((function(e){return!0}))})),ye=function(e){return e.userPage.pageSize},Se=function(e){return e.userPage.totalCount},Fe=function(e){return e.userPage.currentPage},Ee=function(e){return e.userPage.isFetching},Ne=function(e){return e.userPage.followingIsProgress},Ie=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){var n=e.props,r=n.pageSize;(0,n.requestUsers)(t,r)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.requestUsers(t,n)}},{key:"render",value:function(){return Object(q.jsxs)(q.Fragment,{children:[this.props.isFetching?Object(q.jsx)(_e.a,{}):null,Object(q.jsx)(we,{totalCount:this.props.totalCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.usersMain,followF:this.props.followUser,unfollowF:this.props.unfollowUser,isFollowing:this.props.isFollowing})]})}}]),n}(c.a.Component),ke=Object(f.d)(Object(J.b)((function(e){return{usersMain:Pe(e),pageSize:ye(e),totalCount:Se(e),currentPage:Fe(e),isFetching:Ee(e),isFollowing:Ne(e)}}),{followUser:h.b,unfollowUser:h.f,setCurrentPage:h.d,setIsFollowing:h.e,requestUsers:h.c}))(Ie),Te=function(e){return function(t){return Object(q.jsx)(a.Suspense,{fallback:Object(q.jsx)(_e.a,{}),children:Object(q.jsx)(e,Object(x.a)({},t))})}},Ae=c.a.lazy((function(){return n.e(4).then(n.bind(null,306))})),Ue=c.a.lazy((function(){return n.e(3).then(n.bind(null,305))})),Le=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.init?Object(q.jsxs)("div",{className:"app-wrapper",children:[Object(q.jsx)(ne,{}),Object(q.jsx)(ce,{}),Object(q.jsxs)("div",{className:"app-wrapper-content",children:[Object(q.jsx)(D.b,{path:"/dialog_main",render:Te(Ae)}),Object(q.jsx)(D.b,{path:"/profile/:id?",render:Te(Ue)}),Object(q.jsx)(D.b,{path:"/music",render:function(){return Object(q.jsx)(ie,{})}}),Object(q.jsx)(D.b,{path:"/news",render:function(){return Object(q.jsx)(oe,{})}}),Object(q.jsx)(D.b,{path:"/settings",render:function(){return Object(q.jsx)(se,{})}}),Object(q.jsx)(D.b,{path:"/user",render:function(){return Object(q.jsx)(ke,{})}}),Object(q.jsx)(D.b,{path:"/login",render:function(){return Object(q.jsx)($,{})}})]})]}):Object(q.jsx)(_e.a,{})}}]),n}(c.a.Component),ze=Object(f.d)(D.f,Object(J.b)((function(e){return{init:e.appPage.initialized}}),{initializeApp:function(){return function(e){var t=e(S());Promise.all([t]).then((function(){e({type:N})}))}}}))(Le),Me=function(e){return Object(q.jsx)(B.a,{children:Object(q.jsx)(J.a,{store:M,children:Object(q.jsx)(ze,{})})})};o.a.render(Object(q.jsx)(Me,{}),document.getElementById("root")),r()},41:function(e,t,n){"use strict";var r=n.p+"static/media/Spinner-1s-200px.b767aab4.svg",a=(n(0),n(1));t.a=function(e){return Object(a.jsx)("img",{src:r})}},50:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(45),a=n(5),c=(n(0),n(26)),i=n.n(c),o=n(95),s=n(1),u=["input","meta"],l=function(e,t,n,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(s.jsxs)("div",{children:[Object(s.jsx)(o.a,Object(a.a)({placeholder:e,name:r,component:n,validate:t},c))," ",i]})},d=function(e){return function(t){var n=t.input,c=t.meta,o=c.touched,l=c.error,d=Object(r.a)(t,u),f=o&&l;return Object(s.jsxs)("div",{className:i.a.formControl+" "+(f?i.a.error:""),children:[Object(s.jsx)(e,Object(a.a)(Object(a.a)({},n),d)),f&&Object(s.jsxs)("span",{children:[" ",l," "]})]})}}},72:function(e,t,n){e.exports={header:"header_header__3yYVu",loginBlock:"header_loginBlock__1SqWI"}},75:function(e,t,n){e.exports={ava:"paginator_ava__vK7uF",selectedPage:"paginator_selectedPage__3BQFg",paginator:"paginator_paginator__QKsqh",pageNumber:"paginator_pageNumber__3V_Jl"}},91:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=function(e){if(!e)return"field is required"},a=function(e){return function(t){if(t.length>e)return"min ".concat(e," symbols")}},c=function(e){return function(t){if(t.length<e)return"max ".concat(e," symbols")}}},94:function(e,t,n){e.exports={ava:"users_ava__1It9F",selectedPage:"users_selectedPage__3qI08"}}},[[297,1,2]]]);
//# sourceMappingURL=main.1dac52e9.chunk.js.map